sequenceDiagram
    actor User
    participant API as ProductController
    participant Service as ProductService
    participant Repo as OrderItemRepository
    participant DB as MySQL

    User->>API: GET /api/products/popular?days=3&limit=5
    API->>Service: getPopularProducts(days=3, limit=5)

    Service->>Repo: findTopProductsByPeriod(3, 5)
    Repo->>DB: SELECT p.product_id,p.product_name,COUNT(*) as sales_count,SUM(oi.total_price) as total_revenueFROM order_item oiJOIN orders o ON oi.order_id = o.order_idJOIN product p ON oi.product_id = p.product_idWHERE o.created_at >= DATE_SUB(NOW(), INTERVAL 3 DAY)AND o.status = 'CONFIRMED'GROUP BY p.product_idORDER BY sales_count DESCLIMIT 5

    DB-->>Repo: List (Top 5)
    Repo-->>Service: List

    Service->>Service: 순위 부여 (rank: 1~5)
    Service-->>API: PopularProductsResponse{period: "최근 3일", products: [...]}

    API-->>User: 200 OK